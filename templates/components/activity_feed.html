{% load static %}

{% if param == '' or param is None%}
<h4>Recent</h4>
{% elif param|first == '@' %}
<h4>Recent by {{ param }}</h4>
{% else %}
<h4>Recent in "{{ param }}"</h4>
{% endif %}

{% for message in room_messages %}
<div class="d-flex flex-column recent-card-wrapper border border-2 rounded-3 my-3">

  <!-- ACTIVITY CARD HEADER -->
  <div class="col-12 d-flex flex-row glass p-1 gap-2 flex-wrap justify-content-between">
    <div class="d-flex flex-row align-items-center">
      <div style="width: 25px; height: 25px;">{{ message.user.profile.avatar|safe }}<small></div>
      <a href="{% url 'profile' message.user.id %}" class="text-decoration-none link-body-emphasis link-expand">
        @{{ message.user }}</a></small>
    </div>
    <small class="text-end fw-lighter align-self-end">{{ message.sent | timesince }}</small>

  </div>

  <!-- ACTIVITY CARD BODY -->
  <div class="d-flex flex-column p-1 glass-transparent">
    <small class="text-start lh-1">replied in
      {{ message.room.name | truncatechars:35 }} </small>
    <div class="col-9 align-self-start text-start bg-primary-subtle rounded-2 px-3 m-2 text-break">
      <div class="my-1">
        <small>
          {{ message.body | truncatechars:35 }}</small>
      </div>
    </div>
    <a href="{% url 'room' message.room.id %}" class="stretched-link"></a>
  </div>

  <!-- ACTIVITIY CARD FOOTER -->
  <div class="d-flex flex-row p-1 glass">
    {% include '../components/language_badge.html' with language=message.room.language %}
  </div>
</div>

{% endfor %}